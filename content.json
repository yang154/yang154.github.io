{"meta":{"title":"吱呜猪","subtitle":"吱呜猪の博客","description":"  我 | 单片机 | python","author":"吱呜猪","url":"http://yang154.github.io","root":"/"},"pages":[{"title":"404","date":"2019-08-10T08:41:10.000Z","updated":"2021-06-13T05:55:39.000Z","comments":true,"path":"404.html","permalink":"http://yang154.github.io/404.html","excerpt":"","text":""},{"title":"","date":"2022-01-22T05:05:33.582Z","updated":"2021-06-13T05:55:39.000Z","comments":true,"path":"google1xxxxxxx0.html","permalink":"http://yang154.github.io/google1xxxxxxx0.html","excerpt":"","text":"google-site-verification: google110e5e5e14c8dcf0.html"},{"title":"","date":"2022-01-22T05:05:33.582Z","updated":"2021-06-13T05:55:39.000Z","comments":true,"path":"baidu_verify_xxxxxxx.html","permalink":"http://yang154.github.io/baidu_verify_xxxxxxx.html","excerpt":"","text":"wvlc3L96QK"},{"title":"archives","date":"2019-10-24T16:00:00.000Z","updated":"2021-06-13T05:55:39.000Z","comments":true,"path":"archives/index.html","permalink":"http://yang154.github.io/archives/index.html","excerpt":"","text":""},{"title":"categories","date":"2019-10-24T16:00:00.000Z","updated":"2021-06-13T05:55:39.000Z","comments":true,"path":"categories/index.html","permalink":"http://yang154.github.io/categories/index.html","excerpt":"","text":""},{"title":"about","date":"2019-10-24T16:00:00.000Z","updated":"2021-06-13T05:55:39.000Z","comments":true,"path":"about/index.html","permalink":"http://yang154.github.io/about/index.html","excerpt":"","text":""},{"title":"放松一下","date":"2019-08-10T08:41:10.000Z","updated":"2021-06-13T05:55:39.000Z","comments":true,"path":"List/index.html","permalink":"http://yang154.github.io/List/index.html","excerpt":"","text":"影音资源共享"},{"title":"留言板","date":"2019-10-24T16:00:00.000Z","updated":"2021-06-13T05:55:39.000Z","comments":true,"path":"contact/index.html","permalink":"http://yang154.github.io/contact/index.html","excerpt":"","text":"畅所欲言 在这里可以留下你的足迹，欢迎在下方留言，欢迎交换友链，一起交流学习！ 友链 Luckeyの友链信息 博客名称: Luckeyの博客 博客网址: http://www.luckyzmj.cn 博客头像: https://s1.ax1x.com/2020/05/17/YRWsYT.png 博客介绍: The harder you work, the luckier you will be"},{"title":"统计","date":"2020-10-31T02:11:28.000Z","updated":"2021-06-13T05:55:39.000Z","comments":true,"path":"census/index.html","permalink":"http://yang154.github.io/census/index.html","excerpt":"","text":""},{"title":"资源分享","date":"2019-07-19T08:40:27.000Z","updated":"2021-06-13T05:55:39.000Z","comments":true,"path":"resource/index.html","permalink":"http://yang154.github.io/resource/index.html","excerpt":"","text":""},{"title":"友链","date":"2019-07-19T08:42:10.000Z","updated":"2021-06-13T05:55:39.000Z","comments":true,"path":"friends/index.html","permalink":"http://yang154.github.io/friends/index.html","excerpt":"","text":""},{"title":"相册","date":"2022-01-22T05:05:33.462Z","updated":"2021-06-13T05:55:39.000Z","comments":true,"path":"List/galleries/index.html","permalink":"http://yang154.github.io/List/galleries/index.html","excerpt":"","text":""},{"title":"tags","date":"2019-07-19T08:40:27.000Z","updated":"2021-06-13T05:55:39.000Z","comments":true,"path":"tags/index.html","permalink":"http://yang154.github.io/tags/index.html","excerpt":"","text":""},{"title":"视频","date":"2019-08-10T08:41:10.000Z","updated":"2021-06-13T05:55:39.000Z","comments":true,"path":"List/movies/index.html","permalink":"http://yang154.github.io/List/movies/index.html","excerpt":"","text":""},{"title":"听听音乐","date":"2019-07-19T08:40:27.000Z","updated":"2021-06-13T05:55:39.000Z","comments":true,"path":"List/tools/index.html","permalink":"http://yang154.github.io/List/tools/index.html","excerpt":"","text":""},{"title":"乖巧小狗","date":"2022-01-22T05:05:33.462Z","updated":"2021-06-13T05:55:39.000Z","comments":true,"path":"List/galleries/乖巧小狗/index.html","permalink":"http://yang154.github.io/List/galleries/%E4%B9%96%E5%B7%A7%E5%B0%8F%E7%8B%97/index.html","excerpt":"","text":""},{"title":"听听音乐","date":"2019-07-19T08:40:27.000Z","updated":"2021-06-13T05:55:39.000Z","comments":true,"path":"List/music/index.html","permalink":"http://yang154.github.io/List/music/index.html","excerpt":"","text":""},{"title":"动漫插画","date":"2022-01-22T05:05:33.462Z","updated":"2021-06-13T05:55:39.000Z","comments":true,"path":"List/galleries/动漫插画/index.html","permalink":"http://yang154.github.io/List/galleries/%E5%8A%A8%E6%BC%AB%E6%8F%92%E7%94%BB/index.html","excerpt":"","text":""},{"title":"二次元风","date":"2022-01-22T05:05:33.462Z","updated":"2021-06-13T05:55:39.000Z","comments":true,"path":"List/galleries/二次元风/index.html","permalink":"http://yang154.github.io/List/galleries/%E4%BA%8C%E6%AC%A1%E5%85%83%E9%A3%8E/index.html","excerpt":"","text":""},{"title":"动漫风景","date":"2022-01-22T05:05:33.472Z","updated":"2021-06-13T05:55:39.000Z","comments":true,"path":"List/galleries/动漫风景/index.html","permalink":"http://yang154.github.io/List/galleries/%E5%8A%A8%E6%BC%AB%E9%A3%8E%E6%99%AF/index.html","excerpt":"","text":""},{"title":"动漫人物","date":"2022-01-22T05:05:33.462Z","updated":"2021-06-13T05:55:39.000Z","comments":true,"path":"List/galleries/动漫人物/index.html","permalink":"http://yang154.github.io/List/galleries/%E5%8A%A8%E6%BC%AB%E4%BA%BA%E7%89%A9/index.html","excerpt":"","text":""},{"title":"清新花卉","date":"2022-01-22T05:05:33.472Z","updated":"2021-06-13T05:55:39.000Z","comments":true,"path":"List/galleries/清新花卉/index.html","permalink":"http://yang154.github.io/List/galleries/%E6%B8%85%E6%96%B0%E8%8A%B1%E5%8D%89/index.html","excerpt":"","text":""},{"title":"城市风光","date":"2022-01-22T05:05:33.472Z","updated":"2021-06-13T05:55:39.000Z","comments":true,"path":"List/galleries/城市风光/index.html","permalink":"http://yang154.github.io/List/galleries/%E5%9F%8E%E5%B8%82%E9%A3%8E%E5%85%89/index.html","excerpt":"","text":""},{"title":"呆萌猫咪","date":"2022-01-22T05:05:33.472Z","updated":"2021-06-13T05:55:39.000Z","comments":true,"path":"List/galleries/呆萌猫咪/index.html","permalink":"http://yang154.github.io/List/galleries/%E5%91%86%E8%90%8C%E7%8C%AB%E5%92%AA/index.html","excerpt":"","text":""},{"title":"璀璨星空","date":"2022-01-22T05:05:33.472Z","updated":"2021-06-13T05:55:39.000Z","comments":true,"path":"List/galleries/璀璨星空/index.html","permalink":"http://yang154.github.io/List/galleries/%E7%92%80%E7%92%A8%E6%98%9F%E7%A9%BA/index.html","excerpt":"","text":""},{"title":"炫酷跑车","date":"2022-01-22T05:05:33.472Z","updated":"2021-06-13T05:55:39.000Z","comments":true,"path":"List/galleries/炫酷跑车/index.html","permalink":"http://yang154.github.io/List/galleries/%E7%82%AB%E9%85%B7%E8%B7%91%E8%BD%A6/index.html","excerpt":"","text":""},{"title":"甜美食品","date":"2022-01-22T05:05:33.472Z","updated":"2021-06-13T05:55:39.000Z","comments":true,"path":"List/galleries/甜美食品/index.html","permalink":"http://yang154.github.io/List/galleries/%E7%94%9C%E7%BE%8E%E9%A3%9F%E5%93%81/index.html","excerpt":"","text":""},{"title":"自然风景","date":"2022-01-22T05:05:33.472Z","updated":"2021-06-13T05:55:39.000Z","comments":true,"path":"List/galleries/自然风景/index.html","permalink":"http://yang154.github.io/List/galleries/%E8%87%AA%E7%84%B6%E9%A3%8E%E6%99%AF/index.html","excerpt":"","text":""}],"posts":[{"title":"python笔记","slug":"python笔记","date":"2022-01-22T16:00:00.000Z","updated":"2022-01-24T12:49:30.368Z","comments":true,"path":"posts/c00b24b1.html","link":"","permalink":"http://yang154.github.io/posts/c00b24b1.html","excerpt":"","text":"什么是编程语言自然语言(汉语,粤语,德语) --&gt; 人和人之间进行沟通交流的工具 编程语言(java,python,c++) --&gt; 人和计算机进行沟通交流的工具 基本输入输出（IO —&gt; 输入输出）1. print --&gt; 输出语句 2. input --&gt; 输入语句 语法规则: input() #运行程序之后,程序会暂停.等你输入东西,直到你按下回车才继续执行 input('提示内容') # 这里放得是提示内容,而不是结果 开发模式:1.交互模式: 默认进入idle/python环境就是交互模式.表现形式就是每一行前面有&gt;&gt;&gt;， 交互模式的优点就是比较简单,轻便.适合写一些简短的代码,测试代码.但不适合写正式代码 2.脚本模式(文件模式): 把python代码,写到一个文件里.再运行,更好修改,保存. 注释1.单行注释 --&gt; 用#符号来表示.在#后的内容都视作为注释 代码内容 # 注释内容 2.多行注释: 用三对单引号/双引号包裹起来的内容 ''' 注释内容 '''|| \"\"\" 注释内容 \"\"\" 多行注释 --&gt; 没有被使用的三引号字符串 变量一个变量是由三种东西组成 1.数据类型(type) 2.内存地址(id) 3.值(value) 变量命名规则:1.一般由数字,字母,下划线组成(可以用中文,但不推荐) 2.首字符不能是数字,不能数字开头 3.不能有别的特殊符号 4.变量名区分大小写 5.不能用/不推荐用关键字/带有特别含义的数据命名 6.见名知意 --&gt; 看到这个变量名就知道它是干嘛用的 命名规范1.驼峰命名法:单词首字母大写,提高代码阅读性 UserName --&gt; 用户名 UserMoney --&gt; 用户金额 2.匈牙利命名法: 数据类型,作用域,变量名用下划线分隔开_ g_iUserAge --&gt; 全局的int类型的用户年龄 g = global --&gt; 全局 i = int --&gt; 整型 UserAge --&gt; 变量名,用户年龄 变量的使用1.声明变量: 把右边的数据,赋值给左边的变量名 变量名 = 变量值 2.使用变量 直接输出变量 print(变量) print(变量1,变量2) 输入变量 name = input('你的名字') # 把你输入的数据,赋值给这个变量 print(name) 变量的本质 —&gt; 存储数据,方便以后使用 基本数据类型Source Insight 4.0","categories":[],"tags":[],"author":"吱呜猪"},{"title":"思维导图","slug":"思维导图","date":"2022-01-22T16:00:00.000Z","updated":"2022-02-12T05:37:40.023Z","comments":true,"path":"posts/6c27b784.html","link":"","permalink":"http://yang154.github.io/posts/6c27b784.html","excerpt":"","text":"graph LR a(句法)—&gt;b1(简单句) b1—&gt;c7(主谓) b1—&gt;c8(主谓宾) b1—&gt;c9(主系表) b1—&gt;c10(主谓宾+宾补) a--&gt;b2(主从复合句) b2--&gt;c1(定语从句) b2--&gt;c2(状语从句) b2--&gt;c3(名词性从句) c3--&gt;d1(主语从句) c3--&gt;d2(宾语从句) c3--&gt;d3(表语从句) a--&gt;b3(并列句) a--&gt;b4(特殊句子) b4--&gt;c4(虚拟语气) b4--&gt;c5(倒装句) b4--&gt;c6(强调句) enable: true # Available themes: default | dark | forest | neutral theme: forest cdn: //cdn.jsdelivr.net/npm/mermaid@8/dist/mermaid.min.js ```mermaid graph LR a(句子成分)--&gt;b1(主语) a--&gt;b2(谓语) a--&gt;b3(宾语) a--&gt;b4(表语) a--&gt;b5(补语)--&gt;c2(补充说明) a--&gt;b6(状语) a--&gt;b7(定语) b7--&gt;c1(修饰名词) a--&gt;b8(同位语)&lt;/pre&gt; &lt;pre class=\"mermaid\"&gt;graph LR a(动词分类)--&gt;b1(实义动词) b1--&gt;c1(及物动词v.)--&gt;d1(能直接加宾语) b1--&gt;c2(不及物动词v.)--&gt;d2(不能直接加宾语)--&gt;e1(介+宾) a--&gt;b2(系动词) b2--&gt;c3(be动词)--&gt;d3(is/am/are) b2--&gt;c4(感官系动词)--&gt;d4(smell/taste) b2--&gt;c5(变化系动词)--&gt;d5(become/turn/get) b2--&gt;c6(保持系动词)--&gt;d6(keep/stay/remain) a--&gt;b3(助动词,辅助) b3--&gt;c7(do/does)--&gt;d7(否/疑) b3--&gt;c8(have/has)--&gt;d8(时态) b3--&gt;c9(情态动词)--&gt;d9(辅助表达语态语气)&lt;/pre&gt; 实义动词和系动词区别 1. 实义动词+n, 系动词+n/adj 2. 系动词接adj/n作表语 名词可 充当主语、宾语，表语,同位语：结构1：冠词+n。结构2：形容词+n。结构3：及物动词+n。名词充当动词的宾语结构4：介词+n。名词充当介词的宾语结构5：代词词+n。介词用来限定这个名词 ```","categories":[],"tags":[],"author":"吱呜猪"},{"title":"高数笔记","slug":"高数笔记","date":"2022-01-22T16:00:00.000Z","updated":"2022-01-26T07:03:29.244Z","comments":true,"path":"posts/70508bfe.html","link":"","permalink":"http://yang154.github.io/posts/70508bfe.html","excerpt":"","text":"第二节一元函数微分学 定义 求导类型（计算） 应用 一.定义1.导数（瞬时变化率） x的增量:$\\Delta x$ y的增量:$f(x+\\Delta x)-f(x)=\\Delta x$ 变化率:\\dfrac{\\Delta y}{\\Delta x}=\\dfrac{f(x+\\Delta x)-f(x)}{\\Delta x} 瞬时变化率:\\lim\\limits_{\\Delta x\\rightarrow\\mathcal{0}}f(x)= \\lim\\limits_{\\Delta x\\rightarrow\\mathcal{0}}\\dfrac{f(x+\\Delta x)-f(x)}{\\Delta x} (第一定义) x的增量:$x_0-x$ y的增量:$f(x_0)-f(x)$ 变化率:\\dfrac{\\Delta y}{\\Delta x}=\\dfrac{x_0-x}{f(x_0)-f(x)} 瞬时变化率:\\lim\\limits_{x\\rightarrow\\mathcal{x_0}}\\dfrac{f(x_0)-f(x)}{x_0-x}\\triangleq \\lim\\limits_{x\\rightarrow\\mathcal{x_0}}\\dfrac{f(x)-f(x_0)}{x-x_0}(第二定义) 凑导数定义（泛形式）分母=分子内括号差（用于推广） \\lim\\limits_{x\\rightarrow\\mathcal{x_0}}\\dfrac{f(x)-f(x_0)}{x-x_0}\\triangleq f^`(x_0)\\triangleq y^`(x_0)\\triangleq \\dfrac{\\mathrm{d}y}{\\mathrm{d}x} /_{x=x_0}x\\rightarrow0 \\bigg\\{^{\\lim\\limits_{x\\rightarrow\\mathcal{x_0^-}}\\dfrac{f(x)-f(x_0)}{x-x_0}=f^`_-(x_0)}_{\\lim\\limits_{x\\rightarrow\\mathcal{x_0^+}}\\dfrac{f(x)-f(x_0)}{x-x_0}=f^`_+(x_0)}得到f^`(x_0)\\Longleftrightarrow f^`_+(x_0)=f^`_-(x_0)且存在 Q:$连续\\Longleftarrow 可导$一个点的导数值 和 该点切线的斜率相等 （几何意义） y-y_0 =y^`(x_0)(x-x_0)$证明：可导\\Longrightarrow \\lim\\limits_{x\\rightarrow\\mathcal{x_0}}\\dfrac{f(x)-f(x_0)}{x-x_0} 存在，即连续$分母:$\\lim\\limits_{x\\rightarrow\\mathcal{x_0}}(x-x_0)=0$ 因为可导，即极限存在，可得： 分子:$\\lim\\limits_{x\\rightarrow\\mathcal{x_0}}[f(x)-f(x_0)]=0$$x_0为常数，得f(x_0)为常数，$$\\lim\\limits_{x\\rightarrow\\mathcal{x_0}}f(x)=f(x_0)\\Longrightarrow x=x_0处连续$ 二.求导类型（一）常用求导公式……………… （二）求导法则……………… （三）高阶函数求导$ \\bigg\\{^{数学归纳式}_{莱布尼茨展开式}$………………","categories":[],"tags":[],"author":"吱呜猪"},{"title":"stm32笔记","slug":"stm32笔记","date":"2022-01-22T16:00:00.000Z","updated":"2022-02-11T08:04:21.811Z","comments":true,"path":"posts/bad7aa47.html","link":"","permalink":"http://yang154.github.io/posts/bad7aa47.html","excerpt":"","text":"芯片构成STM32系统结构框图 一 .寄存器1 存储器映射存储器不具有地址信息，地址由用户或者芯片厂商分配，给存储器分配地址的过程被称为存储器映射。 2 寄存器映射给存储器分配地址的过程叫存储器映射，再分配一个地址叫重映射。 在51单片机中，利用sfr和sbit关键字，实现的存储器映射 在stm32中，利用指针和宏定义实现寄存器映射 存储器地址 + 总线基地址 +外设基地址 + 外设寄存器地址= 寄存器的绝对地址存储器地址： Block0 --- Code （片内FLASH） Block1 --- SRAM Block2 --- 控制片上外设 Block3 --- FSMC的bank1~bank2 Block4 --- FSMC的bank3~bank4 Block5 --- FSMC寄存器 Block6 --- 没有使用 Block7 --- Cortex-M3的内部使用 总线基地址： APB1总线 APB2总线 AHB总线 外设基地址：GPIO（A~G） AFIO 复位和时钟控制（RCC） EXIT ADC ……………… 外设寄存器（32位）：CRL---------GPIO 端口配置低寄存器 CRH---------GPIO 端口配置高寄存器 IDR---------GPIO 数据输入寄存器 ODR---------GPIO 数据输出寄存器 BSRR--------GPIO 位设置/清除寄存器 BRR---------GPIO 端口位清除寄存器 LCKR--------GPIO 端口配置锁定寄存器 RCC_CR----------时钟控制寄存器 RCC_CFGR--------时钟配置寄存器 RCC_CIR---------时钟中断寄存器 RCC_APB1/APB2/AHB ENR---外设时钟使能寄存器 RCC_APB1/APB2 RSTR---外设复位寄存器 RCC_BDCR--------备份域控制寄存器 RCC_CSR---------控制/状态寄存器 ……………… 二 .新建工程模板1 Startup-&gt;启动文件 2 user-&gt;用户程序（包括主函数） 3 Library-&gt;内部功能的基本函数库 4 Hardware-&gt;外部硬件的驱动程序 5 System-存放系统资源 6 CMSIS-&gt;内核驱动程序 axf文件是通过编译器烧录程序的文件 hex文件是串口烧录软件使用的文件 三 .寄存器应用 STM32F103C8T6引脚定义 VDD-&gt;正电源 VBAT-&gt;正电源 VSS-&gt;接地 GPIO结构图 GPIO——-通用输入输出端口:软件可控制的引脚在STN32固件库中用枚举（enum）来配置 GPIO的模式GPIO输出：通用推挽输出-&gt;GPIO_Mode_Out_PP 1. 推：输出高电平，电流流出到负载，灌电流. 2. 挽：输出低电平，电流流向芯片，拉电流. 通用开漏输出-&gt;GPIO_Mode_Out_OD 1. 只能输出低电平，不能输出高电平. 2. 具有“线与”功能，一个为低，全部为低，用于I2C和SMBUS总线. 复用推挽输出-&gt;GPIO_Mode_AF_PP 通用开漏输出-&gt;GPIO_Mode_Out_ODGPIO输入（ L: &lt;1.2V ; H: &gt;2.0V）: 模拟输入-&gt;GPIO_Mode_AIN 浮空输入-&gt;GPIO_Mode_IN_FLOATING 上拉输入-&gt;GPIO_Mode_IPU 下拉输入-&gt;GPIO_Mode_IPD GPIO的速度选择:bit1 bit0输入模式（复位后的状态）-&gt;00 输出最大速度为10MHZ-&gt;GPIO_Speed_10MHz-&gt;01 输出最大速度为2MHZ-&gt;GPIO_Speed_2MHz-&gt;10 输出最大速度为50MHZ-&gt;GPIO_Speed_50MHz-&gt;11 位带操作一个比特位膨胀后,变成四个字节,膨胀后的区域称为位带别名区,访问位带别名区时,就可以打造访问为带区某个比特位的目的 #define BITBAND(addr, bitnum) ((addr &amp; 0xF0000000)+0x02000000+((addr &amp; 0x00FFFFFF)&lt;&lt;5)+(bitnum&lt;&lt;2)) 四 .stm32固件库分析 汇编编写的启动文件startup_stm32f10x_hd.s:设置堆栈指针、设置pc指针、初始化中断向量表、 配置系统时钟、调用c库函数_main最终去到c的世界 时钟配置文件 system_stm32f10x.c:把外部时钟HSE=8M，经过PLL倍频为72M。 外设相关的 stm32f10x.h:实现了内核之外的外设的寄存器映射 xxx:GP1O、USRAT、I2c、SPI、FSMc stm32f10x_xx_c:外设的驱动函数库文件 stm32f10x_xx,h:存放外设的初始化结构体， 外设初始化结构体成员的参数列表，外设固件库函数的声明. 内核相关的 CMSIS——Cortex:微控制器软件接口标准 core_cm3.h:实现了内核里面外设的寄存器映射 core_cm3.c:内核外设的驱动固件库 NVIC(嵌套向量中断控制器)、sysTick(系统滴答定时器) misc.h:内核的外设,cortex-m3内核经过裁剪的内核外设程序 misc.c:内核外设的库函数 头文件的配置文件 stm32f10x_conf.h:头文件的头文件 stm32f10x_usart.h stm32f10x_i2c.h stm32f10x_spi.h stm32f10x_adc.h stm32f10x_fsmc.h ………… 专门存放中断服务函数的c文件 stm32f10x_it.c stm32f10x_it.h 中断服务函数可以随意放在其他的地方，并不是一定要放在stm32f10x_it.c 五 .启动文件解析六. RCC时钟配置七 .中断与事件 Priority-&gt;优先级 ESR-&gt;中断服务程序 中断类型： 系统异常，体现在内核水平 外部中断，体现在外设水平 NVIC嵌套向量中断控制器 NVIC属于内核外设,管理这包括内核和片上外设所有外设的中断相关的功能. NVIC寄存器简介,core_cm3.h中的结构体定义(Cortex-M3编程手册): NVIC_ISER:中断使能寄存器 NVIC_ICER:中断清除寄存器 NVIC_ISPR:中断使能悬起寄存器 NVIC_ICPR：中断失能悬起寄存器 NVIC_IABR：中断有效位寄存器 NVIC_IP：中断优先级寄存器（8Bit wide） NVIC_STIR：软件触发中断寄存器 中断优先级的定义优先级设定:NVIC-&gt;IPRx 优先级分组:SCB-&gt;AIRCR:PRIGROUP[10:8] 优先级分组 抢占(主)优先级 响应(子)优先级 描述 NVIC_PriorityGroup_0 0 0-15 主-0Bite,子-4Bite NVIC_PriorityGroup_1 0-1 0-7 主-1Bite,子-3Bite NVIC_PriorityGroup_2 0-3 0-3 主-2Bite,子-2Bite NVIC_PriorityGroup_3 0-7 0-1 主-3Bite,子-1Bite NVIC_PriorityGroup_4 0-15 0 主-4Bite,子-0Bite 中断编程的顺序 使能中断请求 1.控制寄存器(USART_CRx)(x=1,2,3):发送完成中断使能 2.NVIC-&gt;ISER中断使能寄存器 配置中断优先级分组1.配置SCB_AIRC寄存器[8:10] 固件库操作:misc-&gt;NVIC_PriorityGroupConfig() 配置NVIC寄存器,NVIC_IRQChannel-&gt;中断源 NVIC_IRQChannelPreemptionPriority-&gt;抢占优先级 NVIC_IRQChannelSubPriority-&gt;子优先级 NVIC_IRQChannelCmd-&gt;使能或失能 以上初始化结构体NVIC_InitTypeDef NVIC_Init();//初始化函数 编写中断服务函数 中断服务函数名要与启动文件里的中断服务函数名称相对应.写错了不会报错 中断服务函数写在stm32f10x_it里面 EXTI—外部 中断/事件 控制器 输入线20个中断源 通过配置外部中断配置寄存器(AFIO_EXTICRx)(x=1,2,3,4) EXTI各寄存器上升沿触发选择寄存器(EXTI_RTSR) 下降沿触发选择寄存器(EXTI_FTSR) 软件中断事件寄存器(EXTI_SWIER) 挂起寄存器(EXTI_PR) 中断屏蔽寄存器(EXTI_IMR) 事件屏蔽寄存器(EXTI_EMR) EXTI编程顺序 初始化要连接到EXTI的GPIO //GPIO初始化 RCC_APB2PeriphClockCmd(RCC_APB2Periph_GPIOA,ENABLE); GPIO_InitTypeDef GPIO_InitStructure; GPIO_InitStructure.GPIO_Mode=GPIO_Mode_IPU;//上拉输入 //也可以浮空输入GPIO_Mode_IN_FLOATING GPIO_InitStructure.GPIO_Pin=GPIO_Pin_1; GPIO_Init(GPIOA,&amp;GPIO_InitStructure); 初始化EXTI用于产生中断/事件(stm32f10x_exti.h)//EXTI初始化 RCC_APB2PeriphClockCmd(RCC_APB2Periph_AFIO,ENABLE); GPIO_EXTILineConfig(GPIO_PortSourceGPIOA,GPIO_PinSource1); EXTI_InitTypeDef EXTI_InitStructure; EXTI_InitStructure.EXTI_Line=EXTI_Line1;//用于产生中断/事件线,配置输入线 EXTI_InitStructure.EXTI_LineCmd=ENABLE;使能或者失能(IMR/EMR),中断/事件屏蔽寄存器 EXTI_InitStructure.EXTI_Mode=EXTI_Mode_Interrupt;//EXTI模式(中断/事件) EXTI_InitStructure.EXTI_Trigger=EXTI_Trigger_Falling;//下降沿触发,触发(上/下/上下) // EXTI_Trigger_Rising 上升沿触发 // EXTI_Trigger_Rising_Falling 双边触发 EXTI_Init(&amp;EXTI_InitStructure); 初始化NVIC,用于处理中断(misc.h)static void EXTI_NVIC_Config(void) { NVIC_InitTypeDef NVIC_InitStructure; NVIC_PriorityGroupConfig(NVIC_PriorityGroup_1);//选择优先级分组 NVIC_InitStructure.NVIC_IRQChannel=EXTI1_IRQn;//中断源选择 NVIC_InitStructure.NVIC_IRQChannelCmd=ENABLE;//使能 NVIC_InitStructure.NVIC_IRQChannelPreemptionPriority=1;//主优先级 NVIC_InitStructure.NVIC_IRQChannelSubPriority=1;//次优先级 NVIC_Init(&amp;NVIC_InitStructure); } 编写中断服务函数EXTI1_IRQHandler() { if(EXTI_GetITStatus(EXTI_Line1)==1)//判断中断/事件屏蔽寄存器是否开放 { GPIOB-&gt;ODR^=GPIO_Pin_0;//发生中断后运行的程序 } EXTI_ClearITPendingBit(EXTI_Line1);//清除挂起寄存器,跳回主函数 } 可在启动文件中寻找中断服务函数名; main函数调用 八 . SysTick(滴答定时器)系统滴答定时器,24位,只能递减存在于内核,嵌套在NVIC中(详情在Cortex-M3编程手册) SysTick控制及状态寄存器-&gt;STK_CTRL |位段|名称|功能| |:—:|:—:|:—:| |16|COUNTFLAG|计数完成标志位| |2|CLKSOURCE|时钟源选择位,0=AHB/8,1=处理器时钟AHB| |1|TICKINT|中断使能,1=使能中断服务程序,0=数到0时无动作| |0|ENABLE|Systick定时器使能位| SysTick重装载数值寄存器-&gt;STK_LOAD |位段|名称|功能| |:—:|:—:|:—:| |23:0|RELOAD|计数器到0时,被重装的值| SysTick当前数值寄存器-&gt;STK_VAL |位段|名称|功能| |:—:|:—:|:—:| |23:0|CYRRENT|读取时返回当前倒计数的值,写1-&gt;清零| SysTick校准寄存器-&gt;STK_CALLIB 九 .通信的基本概念数据传输方式 并行 串行:USART,I2C,SPI 特性 串行通讯 并行通讯 通讯距离 较远 较近 抗干扰能力 较强 较弱 传输速率 较慢 较快 成本 较低 较高 数据通信方向 全双工USAART,SPI,可同时进行收发数据 半双工USAART,SPI不可同时手法数据,可分时收发数据 单工任何时刻都只能往某个固定方向传输数据 数据同步方式 同步有数据线和时钟线,对时钟要求高:———————————-UART 异步有通信起始位,数据停止位,数据校验位,包含各种标识符:USART 通信速率 Bitrate-比特率:每秒传输的二级制位数,单位比特每秒(bit/s) Baudrate-波特率:每秒传输的码元个数 当两个进制位表示一个码元时,没区别,当两个进制位表示一个码元时,有区别, 十 .串口通信协议RS232标准{控制器A&lt;---TTL电平---&gt;电平转换芯片&lt;-----&gt;DB9接口}&lt;----&gt; {DB9&lt;----&gt;电平转换芯片&lt;---TTL电平---&gt;控制器B} RS232标准串口主要用于工业设备直接通信,容错率更高 电平转换芯片一般有MAX323,SP3232 RS232 \\bigg\\{^{15V=高电平1}_{-15V=低电平0}TTL \\bigg\\{^{5V或3.3V=高电平1}_{0V=低电平0}USB转串口{控制器A&lt;---TTL电平---&gt;电平转换芯片&lt;-----&gt;DUSB接口}&lt;----&gt;电脑 USB转串口主要用于设备跟电脑通信 电平转换芯片一般有CH340,PL2303,CP2102,FT232 使用时,电脑端需要安装电平转换芯片的驱动 串口数据包起始位-&gt;有效数据-&gt;校验位-&gt;结束位 校验:数据的抗干扰性 奇校验-&gt;USART_Parity_Odd:有效数据和校验位中’1’的个数为奇数 偶校验-&gt;USART_Parity_Even:有效数据和校验位中’1’的个数为偶数 0校验:校验位总为0 1校验:校验位总为1 无校验不包含校验位 十一 .USART—串口通信USART功能框图 引脚TX:数据发送 RX:数据接受 SCLK:时钟,仅同步通信时使用 nPTS:请求发送(n表示低电平有效) nCTS:允许发送 注意:USART1挂载到APB2总线上.传输速率更高,USART为可支持异步/同步通信,UART只支持同步. 寄存器 数据寄存器-&gt;USART_DR：9位有效，包含一个发送数据寄存器TDR和一个接收数据寄存器RDR。一个地址对应了两个物理内存.类似于51中的SBUF 状态寄存器-&gt;USART_SR 控制寄存器-&gt;USART_CRx(x=1,2,3) 波特率寄存器：Tx/Rx波特率=\\dfrac{\\mathrm{f_{CK}}}{\\mathrm{(16*USARTDIV)}} USART串口编程顺序 初始化串口需要用到的GPIO//GPIO初始化 RCC_APB2PeriphClockCmd(RCC_APB2Periph_GPIOA,ENABLE); GPIO_InitTypeDef GPIO_InitStructure; //TX设置为复用推挽输出 GPIO_InitStructure.GPIO_Mode=GPIO_Mode_AF_PP; GPIO_InitStructure.GPIO_Pin=GPIO_Pin_9; GPIO_InitStructure.GPIO_Speed=GPIO_Speed_50MHz; GPIO_Init(GPIOA,&amp;GPIO_InitStructure); //RX设置为浮空输入 GPIO_InitStructure.GPIO_Mode=GPIO_Mode_IN_FLOATING; GPIO_InitStructure.GPIO_Pin=GPIO_Pin_10; GPIO_Init(GPIOA,&amp;GPIO_InitStructure); 初始化串口，USART_InitTypeDef//串口工作参数设置,串口调试助手参数与以下参数相对应 RCC_APB2PeriphClockCmd(RCC_APB2Periph_USART1,ENABLE); USART_InitTypeDef USART_InitStructure; USART_InitStructure.USART_BaudRate=115200;//设置波特率为115200 USART_InitStructure.USART_WordLength=USART_WordLength_8b;//数据有效位 USART_InitStructure.USART_StopBits=USART_StopBits_1;//停止位 USART_InitStructure.USART_Parity=USART_Parity_No;//校验位 USART_InitStructure.USART_Mode=USART_Mode_Rx|USART_Mode_Tx; //工作模式,可接收可发送 USART_InitStructure.USART_HardwareFlowControl= USART_HardwareFlowControl_None; //硬件流控制 USART_Init(USART1,&amp;USART_InitStructure); 中断配置（接收中断，中断优先级） //串口中断优先级配置 NVIC_InitTypeDef NVIC_InitStructure; NVIC_PriorityGroupConfig(NVIC_PriorityGroup_1);//优先级分组 NVIC_InitStructure.NVIC_IRQChannel=USART1_IRQn;//中断源选择 NVIC_InitStructure.NVIC_IRQChannelPreemptionPriority=1;//主优先级 NVIC_InitStructure.NVIC_IRQChannelSubPriority=1;//次优先级 NVIC_InitStructure.NVIC_IRQChannelCmd=ENABLE;//使能 NVIC_Init(&amp;NVIC_InitStructure); USART_ITConfig(USART1,USART_IT_RXNE,ENABLE);//接收数据中断使能 使能串口 USART_Cmd(USART1,ENABLE);//串口使能 编写发送和接收函数 void USART_SendByte(USART_TypeDef* USARTx, uint8_t Data)//发送一个字节 { USART_SendData(USARTx,Data);//发送数据 while(USART_GetFlagStatus(USART1,USART_FLAG_TXE)==0);//判断发送是否完成 } ............. 编写中断服务函数 void USART1_IRQHandler(void) { uint8_t temp; if(USART_GetFlagStatus(USART1,USART_FLAG_RXNE)==1) { temp=USART_ReceiveData(USART1); USART_SendData(USART1,temp); } } 十二 .DMA—&gt;直接存储器访问主要功能,把数据从一个地方搬到另一个地方,不占用CPU DMA1:有7个通道,可以实现P-&gt;M,M-&gt;P,M-&gt;M DMA2:有5个通道,可以实现P-&gt;M,M-&gt;P,M-&gt;M(只存在大容量和互联型产品)M-&gt;M:FLASH---&gt;SRAM,把内部FLASH的数据传输到内部的SRAM M-&gt;P:SRAM----&gt;串口,把内部SRAM的数据传输到外设DMA1请求映射DMA功能框图分为 DMA请求 通道 仲裁器 DMA结构体typedef struct { uint32_t DMA_PeripheralBaseAddr; //外设地址-----&gt;DMA_CPAR uint32_t DMA_MemoryBaseAddr; //存储器地址-------&gt;DMA_CMAR uint32_t DMA_DIR;//传输方向---------------------&gt;DMA_CCR: DIR uint32_t DMA_BufferSize;//传输数目--------------&gt;DMA_CNDTR uint32_t DMA_PeripheralInc;//外设地址增量模式---&gt;DMA_CCRx:PINC uint32_t DMA_MemoryInc;//存储器地址增量模式-----&gt;DMA_CCRx:MINC uint32_t DMA_PeripheralDataSize; 外设数据宽度---&gt;DMA_CCRx:PSIZE uint32_t DMA_MemoryDataSize;//存储器数据宽度----&gt;DMA_CCRx:MSIZE uint32_t DMA_Mode; //模式选择-------------------&gt;DMA_CCRx:CIRC uint32_t DMA_Priority; //通道优先级-------------&gt;DMA_CCR:PL uint32_t DMA_M2M; //存储器到存储器模式----------&gt;DMA_CCRx:MEM2MEN }DMA_InitTypeDef; //SRC:源.DST:目标","categories":[],"tags":[],"author":"吱呜猪"},{"title":"我的第一篇博客文章","slug":"我的第一篇博客文章","date":"2022-01-17T17:34:30.000Z","updated":"2022-01-24T05:50:16.359Z","comments":true,"path":"posts/b24dd347.html","link":"","permalink":"http://yang154.github.io/posts/b24dd347.html","excerpt":"","text":"杨杨为什么这么帅yyhs","categories":[],"tags":[]}],"categories":[],"tags":[]}